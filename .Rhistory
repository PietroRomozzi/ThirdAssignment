suicides_rough$macro_area
[suicides_rough$macro_area]
suicides_rough$macro_area[suicides_rough$macro_area == "nordwest"]
suicides_rough$macro_area[suicides_rough$macro_area]
help(character)
help(command)
help(factor)
suicides_rough <- read.csv("RoughData_suicides.csv", header = T, sep =";", dec = ",", fill = T)
suicides_rough$macro_area[macro_area == "nordwest"] <- "north"
suicides_rough$macro_area[suicides_rough$macro_area] <- character("north")
View(suicides_rough)
suicides_rough$macro_area[suicides_rough$macro_area = "nordwest"] <- character("north")
suicides_rough$macro_area[suicides_rough$macro_area = "nordwest"] <- character("north")
suicides_rough$macro_area[suicides_rough$macro_area = "nordwest"] <- 1
suicides_rough$macro_area[suicides_rough$macro_area == "nordwest"] <- 1
setwd("Desktop/Hertie/1st Semester/Collaborative Social Science Data Analysis/ThirdAssignment/")
weather <- read.csv("TidyData_meteo.csv", header = TRUE, sep = ";", dec = ",", fill = TRUE)
gini <- read.csv("TidyData_gini.csv", header = T, sep =";", dec = ",", fill = T)
## Loading data for suicides (number of suicides per year).
suicides_rough <- read.csv("RoughData_suicides.csv", header = T, sep =";", dec = ",", fill = T)
## Loading rough data about gdp per capita.
gdp <- read.csv("RoughData_gdp.csv", header = T, sep =";", dec = ",", fill = T)
## We aggregate data for suicides to obtain data for north instead of norht-west and north-east. Likewise for south and islands.
north <- c("nordwest", "nordeast")
south <- c("south", "islands")
centre <- "centre"
suicide <- aggregate()
suicides_rough$aggregate_area <- ifelse(suicides_rough$macro_area == "nordeast" | suicides_rough$macro_area == "nordwest", "north", no)
suicides_rough$aggregate_area <- ifelse(suicides_rough$macro_area == "south" | suicides_rough$macro_area == "islands", "south", )
View(gdp)
help(remove)
remove(gdp$UNIT)
remove("gdp$UNIT")
remove("gdp[ ,3])
View(gdp)
View(gdp)
View(gdp)
View(gdp)
View(gini)
View(suicides_rough)
View(weather)
View(gdp)
View(gdp)
View(gdp)
mmj
=
gdp <- read.csv("RoughData_gdp.csv", header = T, sep =";", dec = ",", fill = T)
View(gdp)
remove(gdp[UNIT])
remove(gdp$UNIT[gdp$UNIT])
gdp <- c(gdp$TIME, gdp$GEO, gdp$Value)
gdp <- read.csv("RoughData_gdp.csv", header = T, sep =";", dec = ",", fill = T)
data.frame(?)
help(data.frame)
gdp <- data.frame(gdp$TIME, gdp$GEO, gdp$Value)
View(gdp)
help(ifelse)
weather <- read.csv("TidyData_meteo.csv", header = TRUE, sep = ";", dec = ",", fill = TRUE)
## Then, we also load other data needed: the gini index calculated for the macro area considered.
gini <- read.csv("TidyData_gini.csv", header = T, sep =";", dec = ",", fill = T)
## Loading data for suicides (number of suicides per year).
suicides_rough <- read.csv("RoughData_suicides.csv", header = T, sep =";", dec = ",", fill = T)
## Loading rough data about gdp per capita.
gdp <- read.csv("RoughData_gdp.csv", header = T, sep =";", dec = ",", fill = T)
## We remove the useless column UNIT
gdp <- data.frame(gdp$TIME, gdp$GEO, gdp$Value)
## We aggregate data for suicides to obtain data for north instead of norht-west and north-east. Likewise for south and islands.
View(weather)
help(factor)
View(suicides_rough)
help(recode)
??recode
library("car", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
help(car)
suicides_rough$macro_area
suicides_rough$aggregate_macro_area <- c("north", "north", "centre", "south", "south", "north", "north","centre", "south", "south", "north", "north", "centre", "south", "south","north","north", "centre", "south", "south" )
View(suicides_rough)
View(suicides_rough)
suicides_rough$macro_area <- c( "north", "north", "centre", "south", "south",
View(suicides_rough)
suicides_rough$macro_area <- c( "north", "north", "centre", "south", "south",
"north", "north","centre", "south", "south",
"north", "north", "centre", "south", "south",
"north","north", "centre", "south", "south" )
suicides_rough$macro_area <- c( "north", "north", "centre", "south", "south", "north", "north","centre", "south", "south","north", "north", "centre", "south", "south","north","north", "centre", "south", "south" )
View(suicides_rough)
suicides_rough <- read.csv("RoughData_suicides.csv", header = T, sep =";", dec = ",", fill = T)
suicides_rough$macro_area <- c( "north", "north", "centre", "south", "south", "north", "north","centre", "south", "south","north", "north", "centre", "south", "south","north","north", "centre", "south", "south" )
View(suicides_rough)
help(subset)
help(aggregate)
help(simplify)
??simplify
??wrap
help(data.frame)
help(matrix)
help(c)
??vectors
sum?
help(sum)
??sum
suicides$year <- ("2006","2006","2006", "2007","2007","2007", "2008","2008","2008", "2009","2009","2009")
suicide$year <- (2006,2006,2006, 2007,2007,2007, 2008,2008,2008,2009,2009,2009)
suicide$year <- c("2006","2006","2006", "2007","2007","2007", "2008","2008","2008", "2009","2009","2009")
suicide$year <- list("2006","2006","2006", "2007","2007","2007", "2008","2008","2008", "2009","2009","2009")
View(gdp)
View(gini)
View(gini)
View(suicides_rough)
aggregate?
help(aggregate)
help(aggregate)
??extract
sum(?)
help(sum)
sum(suicides_rough$suicides, suicides_rough$macro_area == "north", suicides_rough$year == "2006")
sum.if??
??sum.it
n
??sum.if
??if
help(if)
help(if)
help(if)
help(rename)
library(plyr)
help(rename)
gdp <- read.csv("RoughData_gdp.csv", header = T, sep =";", dec = ",", fill = T)
gdp <- data.frame(gdp$TIME, gdp$GEO, gdp$Value)
View(gdp)
weather <- read.csv("TidyData_meteo.csv", header = TRUE, sep = ";", dec = ",", fill = TRUE)
View(weather)
rename("gdp", c( "gdp.TIME" = "year"))
View(gdp)
rename(gdp$gdp.TIME, c( "gdp.TIME" = "year"))
gdp$gdp.GEO <- rename(gdp$gdp.TIME, c( "Nord" = "north"))
gdp$gdp.GEO <- rename(gdp$gdp.GEO, c( "Nord" = "north"))
suicides_rough <- read.csv("RoughData_suicides.csv", header = T, sep =";", dec = ",", fill = T)
View(suicides_rough)
suicides_rough$macro_area <- as.character(suicides_rough$macro_area)
class(suicides_rough$macro_area)
View(gdp)
gdp <- read.csv("RoughData_gdp.csv", header = T, sep =";", dec = ",", fill = T)
gdp <- data.frame(gdp$TIME, gdp$GEO, gdp$Value)
View(gdp)
gdp$gdp.GEO <- as.character(gdp$gdp.GEO)
View(gdp)
gdp$gdp.GEO[gdp$gdp.GEO == "Nord"] <- "norht"
View(gdp)
gdp$gdp.GEO[gdp$gdp.GEO == "Nord"] <- "north"
gdp$gdp.GEO[gdp$gdp.GEO == "Centro (IT)"] <- "centre"
gdp$gdp.GEO[gdp$gdp.GEO == "Sud"] <- "south"
View(gdp)
gdp <- read.csv("RoughData_gdp.csv", header = T, sep =";", dec = ",", fill = T)
gdp <- data.frame(gdp$TIME, gdp$GEO, gdp$Value)
View(gdp)
gdp$gdp.GEO <- as.character(gdp$gdp.GEO)
gdp$gdp.GEO[gdp$gdp.GEO == "Nord"] <- "north"
gdp$gdp.GEO[gdp$gdp.GEO == "Centro (IT)"] <- "centre"
gdp$gdp.GEO[gdp$gdp.GEO == "Sud"] <- "south"
View(gdp)
View(weather)
View(suicides_rough)
View(gdp)
names(gdp)
gdp[1]
gdp[ ,1]
gdp$header
help(header)
??header
gdp$gdp.GEO
gdp <- rename(gdp, replace = c("gdp.GEO" = "macro_area"))
View(gdp)
gdp <- rename(gdp, replace = c("gdp.TIME" = "year"))
gdp <- rename(gdp, replace = c("gdp.Value" = "gdp_pc"))
View(gdp)
View(gdp)
View(suicides_rough)
suicides_rough$macro_area <- as.character(suicides_rough$macro_area)
suicides_rough$macro_area[suicides_rough$macro_area == "nordeast"] <- "north"
View(suicides_rough)
suicides_rough$macro_area[suicides_rough$macro_area == "nordwest"] <- "north"
suicides_rough$macro_area[suicides_rough$macro_area == "islands"] <- "south"
View(suicides_rough)
View(suicides_rough)
suicides_rough <- read.csv("RoughData_suicides.csv", header = T, sep =";", dec = ",", fill = T)
View(suicides_rough)
suicides_rough$macro_area <- as.character(suicides_rough$macro_area)
suicides_rough$macro_area[suicides_rough$macro_area == "nordeast"] <- "north"
suicides_rough$macro_area[suicides_rough$macro_area == "nordwest"] <- "north"
suicides_rough$macro_area[suicides_rough$macro_area == "islands"] <- "south"
View(suicides_rough)
View(weather)
View(gdp)
View(weather)
help(merge)
MergedData1 <- merge(x = weather, y = gdp, union("macro_area", "year"), all = T )
View(MergedData1)
gini <- read.csv("TidyData_gini.csv", header = T, sep =";", dec = ",", fill = T)
View(gini)
MergedData2 <- merge(x = MergedData1, y = gini, union("macro_area", "year"), all = T )
View(MergedData2)
View(weather)
View(MergedData1)
View(MergedData2)
View(suicides_rough)
View(MergedData2)
class(MergedData2)
class(names(MergedData2))
class(head(MergedData2))
View(MergedData2)
help(as.numeric)
suicides_rough$suicides <- as.numeric(suicides_rough$suicides)
View(MergedData2)
View(suicides_rough)
View(suicides_rough)
View(weather)
View(suicides_rough)
View(MergedData2)
View(suicides_rough)
?extract
View(MergedData2)
help(extract)
library(XML)
?extract
library(httr)
?extract
library(dplyr)
library(plyr)
?group_by
View(MergedData2)
View(suicides_rough)
suicides_clean <- group_by(suicides_rough, macro_area, year)
View(suicides_clean)
suicide_clean <- summarise(suicide_rough, tot_suicide == sum(suicides))
suicide_clean <- summarise(suicides_rough, tot_suicide == sum(suicides))
help(summarise)
suicide_clean <- summarise(suicides_rough, tot_suicide = sum(suicides))
View(suicides_clean)
View(suicide_clean)
View(suicide_clean)
suicide_clean$tot_suicides <- summarise(suicides_rough, tot_suicide = sum(suicides), filter = "2006" & "north" )
suicide_clean$tot_suicides <- summarise(suicides_rough, tot_suicide = sum(suicides), filter = 2006 & north )
View(suicide_clean)
remove(suicide_clean)
remove(suicides_rough)
View(suicides_clean)
remove(suicides_clean)
suicides_rough$macro_area <- as.character(suicides_rough$macro_area)
suicides_rough$macro_area[suicides_rough$macro_area == "nordeast"] <- "north"
suicides_rough$macro_area[suicides_rough$macro_area == "nordwest"] <- "north"
suicides_rough <- read.csv("RoughData_suicides.csv", header = T, sep =";", dec = ",", fill = T)
suicides_rough$macro_area <- as.character(suicides_rough$macro_area)
suicides_rough$macro_area[suicides_rough$macro_area == "nordeast"] <- "north"
suicides_rough$macro_area[suicides_rough$macro_area == "nordwest"] <- "north"
suicides_rough$macro_area[suicides_rough$macro_area == "islands"] <- "south"
## The next step will be to sum the number of suicides in not aggregate macro areas to obtain this data for the aggregate macro area.
suicides_rough$suicides <- as.numeric(suicides_rough$suicides)
View(suicides_rough)
help(level)
help(factor)
suicides_rough$macro_area <- as.factor(suicides_rough$macro_area)
View(suicides_rough)
suicides_rough$year <- as.factor(suicides_rough$year)
suicide_clean <- group_by(suicides_rough, year, macro_area, FUN = sum() )
View(suicide_clean)
View(suicide_clean)
View(suicides_rough)
suicides_clean <- group_by(suicides_rough, macro_area, year)
View(suicides_clean)
suicide_clean <- summarise(suicides_clean, tot_suicide = sum(suicides))
View(suicide_clean)
View(MergedData2)
MergedData3 <- merge(x = MergedData2, y = suicide_clean, union("macro_area", "year"), all = T)
View(MergedData3)
weather <- read.csv("TidyData_meteo.csv", header = TRUE, sep = ";", dec = ",", fill = TRUE)
## Then, we also load other data needed: the gini index calculated for the macro area considered.
gini <- read.csv("TidyData_gini.csv", header = T, sep =";", dec = ",", fill = T)
## Loading data for suicides (number of suicides per year).
suicides_rough <- read.csv("RoughData_suicides.csv", header = T, sep =";", dec = ",", fill = T)
## Loading rough data about gdp per capita (euros per person).
gdp <- read.csv("RoughData_gdp.csv", header = T, sep =";", dec = ",", fill = T)
## We remove the useless column UNIT.
gdp <- data.frame(gdp$TIME, gdp$GEO, gdp$Value)
# We rename variables and wrong named object in the table to make it comparable with others we use.
gdp$gdp.GEO <- as.character(gdp$gdp.GEO)
gdp$gdp.GEO[gdp$gdp.GEO == "Nord"] <- "north"
gdp$gdp.GEO[gdp$gdp.GEO == "Centro (IT)"] <- "centre"
gdp$gdp.GEO[gdp$gdp.GEO == "Sud"] <- "south"
gdp <- rename(gdp, replace = c("gdp.GEO" = "macro_area"))
gdp <- rename(gdp, replace = c("gdp.TIME" = "year"))
gdp <- rename(gdp, replace = c("gdp.Value" = "gdp_pc"))
# weather and gdp are tidy. We merge these two data frames.
MergedData1 <- merge(x = weather, y = gdp, union("macro_area", "year"), all = T )
# Now we merge the latter with data from the table gini.
MergedData2 <- merge(x = MergedData1, y = gini, union("macro_area", "year"), all = T )
## We rename nordwest and nordeast as "north" and south and islands as "south" to make this table comparable with the others.
suicides_rough$macro_area <- as.character(suicides_rough$macro_area)
suicides_rough$macro_area[suicides_rough$macro_area == "nordeast"] <- "north"
suicides_rough$macro_area[suicides_rough$macro_area == "nordwest"] <- "north"
suicides_rough$macro_area[suicides_rough$macro_area == "islands"] <- "south"
## The next step will be to sum the number of suicides in not aggregate macro areas to obtain this data for the aggregate macro area.
suicides_rough$suicides <- as.numeric(suicides_rough$suicides)
suicides_clean <- group_by(suicides_rough, macro_area, year)
suicide_clean <- summarise(suicides_clean, tot_suicide = sum(suicides))
# Final merge.
MergedData3 <- merge(x = MergedData2, y = suicide_clean, union("macro_area", "year"), all = T)
View(MergedData3)
MergedData4 <- merge(x = MergedData2, y = suicide_clean, union("macro_area", "year"), all = F)
View(MergedData4)
summary(MergedData4)
describe(MergedData4)
library(psych)
library(psych)
install.packages("psych")
library(psych)
describe(MergedData4)
View(MergedData4)
View(MergedData4)
M1 <- lm(tot_suicide ∼ gdp_pc + avg_precipitations + avg_temperature + gini_index , data = MergedData4)
M1 <- lm(tot_suicide ~ gdp_pc + avg_precipitations + avg_temperature + gini_index , data = MergedData4)
View(M1)
summary(M1)
M2 <- lm(tot_suicide ~ gdp_pc + avg_temperature + gini_index , data = MergedData4)
summary(M2)
library("ggplot2", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
scatter.plot(M2)
library("car", lib.loc="/Library/Frameworks/R.framework/Versions/3.1/Resources/library")
scatter.plotMatrix(M2)
scatterplotMatrix(M2)
scatterplotMatrix(MergedData4[gdp_pc,avg_temperature,gini_index])
View(MergedData4)
scatterplotMatrix(MergedData4[,3:7])
setwd("Desktop/Hertie/1st Semester/Collaborative Social Science Data Analysis/ThirdAssignment/")
library(dplyr)
detach("package:dplyr", unload=TRUE)
library(plyr)
library(plyr)
library(ggplot2)
library(car)
weather <- read.csv("TidyData_meteo.csv", header = TRUE, sep = ";", dec = ",", fill = TRUE)
gini <- read.csv("TidyData_gini.csv", header = T, sep =";", dec = ",", fill = T)
suicides_rough <- read.csv("RoughData_suicides.csv", header = T, sep =";", dec = ",", fill = T)
suicides_rough$macro_area <- as.character(suicides_rough$macro_area)
suicides_rough$macro_area[suicides_rough$macro_area == "nordeast"] <- "north"
suicides_rough$macro_area[suicides_rough$macro_area == "nordwest"] <- "north"
suicides_rough$macro_area[suicides_rough$macro_area == "islands"] <- "south"
View(suicides_rough)
suicides_rough$suicides <- as.numeric(suicides_rough$suicides)
help(group_by)
library(dplyr)
suicides_clean <- group_by(suicides_rough, macro_area, year)
View(suicides_clean)
suicides_clean <- summarise(suicides_clean, tot_suicide = sum(suicides))
View(suicides_clean)
library(plyr)
library(dplyr)
library(psych)
library(ggplot2)
library(car)
weather <- read.csv("TidyData_meteo.csv", header = TRUE, sep = ";", dec = ",", fill = TRUE)
## Then, we also load other data needed: the gini index calculated for the macro area considered.
gini <- read.csv("TidyData_gini.csv", header = T, sep =";", dec = ",", fill = T)
## Loading data for suicides (number of suicides per year).
suicides_rough <- read.csv("RoughData_suicides.csv", header = T, sep =";", dec = ",", fill = T)
## Loading rough data about gdp per capita (euros per person).
gdp <- read.csv("RoughData_gdp.csv", header = T, sep =";", dec = ",", fill = T)
## We remove the useless column UNIT.
gdp <- data.frame(gdp$TIME, gdp$GEO, gdp$Value)
# We rename variables and wrong named object in the table to make it comparable with others we use.
gdp$gdp.GEO <- as.character(gdp$gdp.GEO)
gdp$gdp.GEO[gdp$gdp.GEO == "Nord"] <- "north"
gdp$gdp.GEO[gdp$gdp.GEO == "Centro (IT)"] <- "centre"
gdp$gdp.GEO[gdp$gdp.GEO == "Sud"] <- "south"
gdp <- rename(gdp, replace = c("gdp.GEO" = "macro_area"))
gdp <- rename(gdp, replace = c("gdp.TIME" = "year"))
gdp <- rename(gdp, replace = c("gdp.Value" = "gdp_pc"))
View(gdp)
# weather and gdp are tidy. We merge these two data frames.
MergedData1 <- merge(x = weather, y = gdp, union("macro_area", "year"), all = T )
# Now we merge the latter with data from the table gini.
MergedData2 <- merge(x = MergedData1, y = gini, union("macro_area", "year"), all = T )
## We rename nordwest and nordeast as "north" and south and islands as "south" to make this table comparable with the others.
suicides_rough$macro_area <- as.character(suicides_rough$macro_area)
suicides_rough$macro_area[suicides_rough$macro_area == "nordeast"] <- "north"
suicides_rough$macro_area[suicides_rough$macro_area == "nordwest"] <- "north"
suicides_rough$macro_area[suicides_rough$macro_area == "islands"] <- "south"
View(suicides_rough)
View(MergedData2)
## The next step will be to sum the number of suicides in not aggregate macro areas to obtain this data for the aggregate macro area.
suicides_rough$suicides <- as.numeric(suicides_rough$suicides)
suicides_clean <- group_by(suicides_rough, macro_area, year)
suicides_clean <- summarise(suicides_clean, tot_suicide = sum(suicides))
View(suicides_clean)
# Final merge.
MergedData3 <- merge(x = MergedData2, y = suicide_clean, union("macro_area", "year"), all = T)
# MergedData 3 contains NAs, so we made this merge again not to include NA so using a complete dataframe.
MergedData4 <- merge(x = MergedData2, y = suicide_clean, union("macro_area", "year"), all = F)
# Linear Model.
M1 <- lm(tot_suicide ~ gdp_pc + avg_precipitations + avg_temperature + gini_index , data = MergedData4)
summary(M1)
M2 <- lm(tot_suicide ~ gdp_pc + avg_temperature + gini_index , data = MergedData4)
summary(M2)
scatterplotMatrix(MergedData4[,3:7])
MergedData3 <- merge(x = MergedData2, y = suicides_clean, union("macro_area", "year"), all = T)
# MergedData 3 contains NAs, so we made this merge again not to include NA so using a complete dataframe.
MergedData4 <- merge(x = MergedData2, y = suicides_clean, union("macro_area", "year"), all = F)
# Linear Model.
M1 <- lm(tot_suicide ~ gdp_pc + avg_precipitations + avg_temperature + gini_index , data = MergedData4)
summary(M1)
M2 <- lm(tot_suicide ~ gdp_pc + avg_temperature + gini_index , data = MergedData4)
summary(M2)
scatterplotMatrix(MergedData4[,3:7])
View(MergedData4)
setwd("Desktop/Hertie/1st Semester/Collaborative Social Science Data Analysis/ThirdAssignment/")
library(plyr)
library(dplyr)
library(psych)
library(ggplot2)
library(car)
# We are about to prepare the dataset on which we will carry on our analysis.
## After having made our excel data about weather tidy, we have converted them in csv format.
## The next step is to import the data we have prepared before.
weather <- read.csv("TidyData_meteo.csv", header = TRUE, sep = ";", dec = ",", fill = TRUE)
## Then, we also load other data needed: the gini index calculated for the macro area considered.
gini <- read.csv("TidyData_gini.csv", header = T, sep =";", dec = ",", fill = T)
## Loading data for suicides (number of suicides per year).
suicides_rough <- read.csv("RoughData_suicides.csv", header = T, sep =";", dec = ",", fill = T)
## Loading rough data about gdp per capita (euros per person).
gdp <- read.csv("RoughData_gdp.csv", header = T, sep =";", dec = ",", fill = T)
## We remove the useless column UNIT.
gdp <- data.frame(gdp$TIME, gdp$GEO, gdp$Value)
# We rename variables and wrong named object in the table to make it comparable with others we use.
gdp$gdp.GEO <- as.character(gdp$gdp.GEO)
gdp$gdp.GEO[gdp$gdp.GEO == "Nord"] <- "north"
gdp$gdp.GEO[gdp$gdp.GEO == "Centro (IT)"] <- "centre"
gdp$gdp.GEO[gdp$gdp.GEO == "Sud"] <- "south"
gdp <- rename(gdp, replace = c("gdp.GEO" = "macro_area"))
gdp <- rename(gdp, replace = c("gdp.TIME" = "year"))
gdp <- rename(gdp, replace = c("gdp.Value" = "gdp_pc"))
# weather and gdp are tidy. We merge these two data frames.
MergedData1 <- merge(x = weather, y = gdp, union("macro_area", "year"), all = T )
# Now we merge the latter with data from the table gini.
MergedData2 <- merge(x = MergedData1, y = gini, union("macro_area", "year"), all = T )
## We rename nordwest and nordeast as "north" and south and islands as "south" to make this table comparable with the others.
suicides_rough$macro_area <- as.character(suicides_rough$macro_area)
suicides_rough$macro_area[suicides_rough$macro_area == "nordeast"] <- "north"
suicides_rough$macro_area[suicides_rough$macro_area == "nordwest"] <- "north"
suicides_rough$macro_area[suicides_rough$macro_area == "islands"] <- "south"
## The next step will be to sum the number of suicides in not aggregate macro areas to obtain this data for the aggregate macro area.
suicides_rough$suicides <- as.numeric(suicides_rough$suicides)
suicides_clean <- group_by(suicides_rough, macro_area, year)
suicides_clean <- summarise(suicides_clean, tot_suicide = sum(suicides))
# Final merge.
MergedData3 <- merge(x = MergedData2, y = suicides_clean, union("macro_area", "year"), all = T)
# MergedData 3 contains NAs, so we made this merge again not to include NA so using a complete dataframe.
MergedData4 <- merge(x = MergedData2, y = suicides_clean, union("macro_area", "year"), all = F)
# Linear Model.
M1 <- lm(tot_suicide ~ gdp_pc + avg_precipitations + avg_temperature + gini_index , data = MergedData4)
summary(M1)
M2 <- lm(tot_suicide ~ gdp_pc + avg_temperature + gini_index , data = MergedData4)
summary(M2)
scatterplotMatrix(MergedData4[,3:7])
detach("package:psych", unload=TRUE)
library(plyr)
library(dplyr)
library(ggplot2)
library(car)
# We are about to prepare the dataset on which we will carry on our analysis.
## After having made our excel data about weather tidy, we have converted them in csv format.
## The next step is to import the data we have prepared before.
weather <- read.csv("TidyData_meteo.csv", header = TRUE, sep = ";", dec = ",", fill = TRUE)
## Then, we also load other data needed: the gini index calculated for the macro area considered.
gini <- read.csv("TidyData_gini.csv", header = T, sep =";", dec = ",", fill = T)
## Loading data for suicides (number of suicides per year).
suicides_rough <- read.csv("RoughData_suicides.csv", header = T, sep =";", dec = ",", fill = T)
## Loading rough data about gdp per capita (euros per person).
gdp <- read.csv("RoughData_gdp.csv", header = T, sep =";", dec = ",", fill = T)
## We remove the useless column UNIT.
gdp <- data.frame(gdp$TIME, gdp$GEO, gdp$Value)
# We rename variables and wrong named object in the table to make it comparable with others we use.
gdp$gdp.GEO <- as.character(gdp$gdp.GEO)
gdp$gdp.GEO[gdp$gdp.GEO == "Nord"] <- "north"
gdp$gdp.GEO[gdp$gdp.GEO == "Centro (IT)"] <- "centre"
gdp$gdp.GEO[gdp$gdp.GEO == "Sud"] <- "south"
gdp <- rename(gdp, replace = c("gdp.GEO" = "macro_area"))
gdp <- rename(gdp, replace = c("gdp.TIME" = "year"))
gdp <- rename(gdp, replace = c("gdp.Value" = "gdp_pc"))
# weather and gdp are tidy. We merge these two data frames.
View(gdp)
MergedData1 <- merge(x = weather, y = gdp, union("macro_area", "year"), all = T )
# Now we merge the latter with data from the table gini.
MergedData2 <- merge(x = MergedData1, y = gini, union("macro_area", "year"), all = T )
## We rename nordwest and nordeast as "north" and south and islands as "south" to make this table comparable with the others.
suicides_rough$macro_area <- as.character(suicides_rough$macro_area)
suicides_rough$macro_area[suicides_rough$macro_area == "nordeast"] <- "north"
suicides_rough$macro_area[suicides_rough$macro_area == "nordwest"] <- "north"
suicides_rough$macro_area[suicides_rough$macro_area == "islands"] <- "south"
## The next step will be to sum the number of suicides in not aggregate macro areas to obtain this data for the aggregate macro area.
suicides_rough$suicides <- as.numeric(suicides_rough$suicides)
suicides_clean <- group_by(suicides_rough, macro_area, year)
suicides_clean <- summarise(suicides_clean, tot_suicide = sum(suicides))
# Final merge.
MergedData3 <- merge(x = MergedData2, y = suicides_clean, union("macro_area", "year"), all = T)
# MergedData 3 contains NAs, so we made this merge again not to include NA so using a complete dataframe.
MergedData4 <- merge(x = MergedData2, y = suicides_clean, union("macro_area", "year"), all = F)
# Linear Model.
M1 <- lm(tot_suicide ~ gdp_pc + avg_precipitations + avg_temperature + gini_index , data = MergedData4)
summary(M1)
M2 <- lm(tot_suicide ~ gdp_pc + avg_temperature + gini_index , data = MergedData4)
summary(M2)
scatterplotMatrix(MergedData4[,3:7])
